<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<title>
  
    Category: Algorithms
  
</title>

<meta property="og:type" content="website">
<meta property="og:title" content="Kevin's Blog">
<meta property="og:url" content="http://yoursite.com/categories/Algorithms/index.html">
<meta property="og:site_name" content="Kevin's Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Kevin's Blog">


  <link rel="alternative" href="/atom.xml" title="Kevin&#39;s Blog" type="application/atom+xml">



  <link rel="icon" href="/favicon.png">


<link rel="stylesheet" href="/perfect-scrollbar/css/perfect-scrollbar.min.css">
<link rel="stylesheet" href="/styles/main.css">






</head>
<body
  
    class="monochrome"
  
  >
  <div class="mobile-header">
  <button class="sidebar-toggle" type="button">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </button>
  <a class="title" href="/">Kevin&#39;s Blog</a>
</div>

  <div class="main-container">
    <div class="sidebar">
  <div class="header">
    <h1 class="title"><a href="/">Kevin&#39;s Blog</a></h1>
    
    <div class="info">
      <div class="content">
        
        
          <div class="author">Hao Xi</div>
        
      </div>
      
        <div class="avatar">
          
            <a href="/about"><img src="https://cn.gravatar.com/avatar/35fef74d731255cd569c2c2b0b9e87e4?s=200"></a>
          
        </div>
      
    </div>
  </div>
  <div class="body">
    
      
        <ul class="nav">
          
            
              <li class="category-list-container">
                <a href="javascript:;">Category</a>
                <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithms/">Algorithms</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Asp-Net/">Asp.Net</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Basic-Theory/">Basic Theory</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Default/">Default</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/GNU-Linux/">GNU/Linux</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Interview/">Interview</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kevin-s-Life/">Kevin's Life</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Performance/">Performance</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Phone/">Phone</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/">Programming</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Rework/">Rework</a><span class="category-list-count">1</span></li></ul>
              </li>
            
          
            
              <li class="tag-list-container">
                <a href="javascript:;">Tag</a>
                <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/2011-Plan/">2011 Plan</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ACM-ICPC/">ACM-ICPC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ActiveX/">ActiveX</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AfterLogic/">AfterLogic</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithms/">Algorithms</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Asp-Net/">Asp.Net</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BFS/">BFS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Business/">Business</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C#</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CLRS/">CLRS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Concurrent/">Concurrent</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Coverage/">Coverage</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Critical-Section/">Critical Section</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DFS/">DFS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Structure/">Data Structure</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design-Pattern-Series/">Design Pattern Series</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dovecot/">Dovecot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Download-Website/">Download Website</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dream/">Dream</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Email/">Email</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Environment-Variables/">Environment Variables</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/First-Post/">First Post</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Freelance/">Freelance</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GNOME/">GNOME</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Generic/">Generic</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Happiness/">Happiness</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Heap/">Heap</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/If-You-Are-The-One/">If You Are The One</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Interview/">Interview</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JobFinder/">JobFinder</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Josephus/">Josephus</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/KDE/">KDE</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/KMP/">KMP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Let-The-Bullet-Fly/">Let The Bullet Fly</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MSMQ/">MSMQ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac/">Mac</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Management/">Management</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Memory/">Memory</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Monte-Carlo/">Monte Carlo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Movies/">Movies</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mutex/">Mutex</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/My-Blogs/">My Blogs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/My-Life/">My Life</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/My-Name/">My Name</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/">MySQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ncover/">Ncover</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nunit/">Nunit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Old-Boys/">Old Boys</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Online-Judge/">Online Judge</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenMP/">OpenMP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Parallel-Programming/">Parallel Programming</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Postfix/">Postfix</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Present/">Present</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Primer/">Primer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Queue/">Queue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Reading/">Reading</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Recursion/">Recursion</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Reverse-Polish-Notation/">Reverse Polish Notation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Rework/">Rework</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ShengYiJie/">ShengYiJie</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Silverlight/">Silverlight</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Singleton/">Singleton</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sparse-Matrix/">Sparse Matrix</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Stack/">Stack</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Stirling-s-Formula/">Stirling's Formula</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/String-Matching/">String Matching</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Template/">Template</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Teru-Teru-Bouz/">Teru Teru Bouz</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/The-bright-eleven/">The bright eleven</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Theory/">Theory</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thread/">Thread</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Trace/">Trace</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Translation/">Translation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Triple-Table/">Triple Table</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unit-Test/">Unit Test</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VPS/">VPS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webmail/">Webmail</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Wedding/">Wedding</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/">Windows</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows-Phone-7/">Windows Phone 7</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/X-Window/">X Window</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Xml/">Xml</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iPhone/">iPhone</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vWorker/">vWorker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wget/">wget</a><span class="tag-list-count">1</span></li></ul>
              </li>
            
          
            
              <li class="archive-list-container">
                <a href="javascript:;">Archive</a>
                <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/">2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/">2012</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/">2011</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/">2010</a><span class="archive-list-count">25</span></li></ul>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="/" title="Homepage">Homepage</a>
              </li>
            
          
            
              <li>
                <a href="/archives" title="By Year">By Year</a>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="https://github.com/denjones/hexo-theme-chan" title="Chan" target="_blank" rel="external">Chan</a>
              </li>
            
          
            
              <li>
                <a href="https://github.com/denjones" title="Github" target="_blank" rel="external">Github</a>
              </li>
            
          
            
              <li>
                <a href="/atom.xml" title="RSS">RSS</a>
              </li>
            
          
        </ul>
      
    
  </div>
</div>

    <div class="main-content">
      
        <div style="max-width: 1000px">
      
          <h1>Algorithms</h1>


  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2012/03/07/sum1n-problem/" >
  SUM(1/N!) problem
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2012/03/07/sum1n-problem/"><span class="article-date">
  2012-03-07
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/">Algorithms</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/Programming/">Programming</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithms/">Algorithms</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C#</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <p>Hello, Anton</p>
<p>Here is my solution of the <a href="http://jetcracker.wordpress.com/2012/03/07/mpi-calculating-sum/" target="_blank" rel="external">SUM(1/N!)</a> problem, as for the low accuracy of a 32bit double value, there is no need to calculate 1/N! when N &gt;= 178.</p>
<p><u><em>Sample Code</em></u><br>  <div style="border-bottom:silver 1px solid;text-align:left;border-left:silver 1px solid;line-height:12pt;background-color:#f4f4f4;width:97.5%;font-family:&#039;direction:ltr;max-height:800px;font-size:8pt;overflow:auto;border-top:silver 1px solid;cursor:text;border-right:silver 1px solid;margin:20px 0 10px;padding:4px;" id="codeSnippetWrapper">   <div style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;padding:0;" id="codeSnippet">     <pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span style="color:#606060;" id="lnum1">   1:</span> <span style="color:#008000;">//<em>QUESTION</em></span></pre><br><!--CRLF--></div></div></p>
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum2&quot;&gt;   2:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//Calculate the SUM(1/N!), this problem is from Anton&apos;s blog, see:&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum3&quot;&gt;   3:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//http://jetcracker.wordpress.com/2012/03/07/mpi-calculating-sum/&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum4&quot;&gt;   4:&lt;/span&gt;&amp;#160; &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum5&quot;&gt;   5:&lt;/span&gt; &lt;span style=&quot;color:#cc6633;&quot;&gt;#include&lt;/span&gt; &amp;lt;stdio.h&amp;gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum6&quot;&gt;   6:&lt;/span&gt; &lt;span style=&quot;color:#cc6633;&quot;&gt;#include&lt;/span&gt; &amp;lt;omp.h&amp;gt; &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum7&quot;&gt;   7:&lt;/span&gt; &lt;span style=&quot;color:#cc6633;&quot;&gt;#include&lt;/span&gt; &amp;lt;ctime&amp;gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum8&quot;&gt;   8:&lt;/span&gt; &lt;span style=&quot;color:#cc6633;&quot;&gt;#include&lt;/span&gt; &amp;lt;cmath&amp;gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum9&quot;&gt;   9:&lt;/span&gt; &lt;span style=&quot;color:#cc6633;&quot;&gt;#include&lt;/span&gt; &amp;lt;cstdlib&amp;gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum10&quot;&gt;  10:&lt;/span&gt;&amp;#160; &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum11&quot;&gt;  11:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//threads&apos; number set to openmp.&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum12&quot;&gt;  12:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//#define NUMBER_THREADS 4&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum13&quot;&gt;  13:&lt;/span&gt;&amp;#160; &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum14&quot;&gt;  14:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//*FACTORIAL*&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum15&quot;&gt;  15:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//Theory 1: While N &amp;gt;= 178, the value of 1/N! would be nearly to 0 and won&apos;t be &lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum16&quot;&gt;  16:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//            saved as &apos;double&apos; in 32bit machine, so it is actually a 1ms task.&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum17&quot;&gt;  17:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//Theory 2: 1/(N-1)! can be used to calculate 1/N! by multiply 1/N.&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum18&quot;&gt;  18:&lt;/span&gt; &lt;span style=&quot;color:#0000ff;&quot;&gt;double&lt;/span&gt; factorial()&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum19&quot;&gt;  19:&lt;/span&gt; {&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum20&quot;&gt;  20:&lt;/span&gt;     &lt;span style=&quot;color:#0000ff;&quot;&gt;int&lt;/span&gt; n = 177;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum21&quot;&gt;  21:&lt;/span&gt;&amp;#160; &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum22&quot;&gt;  22:&lt;/span&gt;     &lt;span style=&quot;color:#0000ff;&quot;&gt;double&lt;/span&gt; factor = 1;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum23&quot;&gt;  23:&lt;/span&gt;     &lt;span style=&quot;color:#0000ff;&quot;&gt;double&lt;/span&gt; retval = 1;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum24&quot;&gt;  24:&lt;/span&gt;&amp;#160; &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum25&quot;&gt;  25:&lt;/span&gt;     &lt;span style=&quot;color:#008000;&quot;&gt;//#pragma omp parallel for&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum26&quot;&gt;  26:&lt;/span&gt;     &lt;span style=&quot;color:#0000ff;&quot;&gt;for&lt;/span&gt; (&lt;span style=&quot;color:#0000ff;&quot;&gt;int&lt;/span&gt; i = 2; i &amp;lt;= n; i++)&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum27&quot;&gt;  27:&lt;/span&gt;     {&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum28&quot;&gt;  28:&lt;/span&gt;         factor *= (1.0 / (&lt;span style=&quot;color:#0000ff;&quot;&gt;double&lt;/span&gt;)i);&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum29&quot;&gt;  29:&lt;/span&gt;         retval += factor;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum30&quot;&gt;  30:&lt;/span&gt;     }&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum31&quot;&gt;  31:&lt;/span&gt;&amp;#160; &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum32&quot;&gt;  32:&lt;/span&gt;     &lt;span style=&quot;color:#0000ff;&quot;&gt;return&lt;/span&gt; retval;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum33&quot;&gt;  33:&lt;/span&gt; }&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum34&quot;&gt;  34:&lt;/span&gt;&amp;#160; &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum35&quot;&gt;  35:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//*TEST MAIN*&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum36&quot;&gt;  36:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//Caculate the result, and then print out to console.&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum37&quot;&gt;  37:&lt;/span&gt; &lt;span style=&quot;color:#0000ff;&quot;&gt;void&lt;/span&gt; main()&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum38&quot;&gt;  38:&lt;/span&gt; {    &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum39&quot;&gt;  39:&lt;/span&gt;     clock_t start = clock();&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum40&quot;&gt;  40:&lt;/span&gt;&amp;#160; &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum41&quot;&gt;  41:&lt;/span&gt;     &lt;span style=&quot;color:#008000;&quot;&gt;//setup the threads number.&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum42&quot;&gt;  42:&lt;/span&gt;     &lt;span style=&quot;color:#008000;&quot;&gt;//omp_set_num_threads(NUMBER_THREADS);&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum43&quot;&gt;  43:&lt;/span&gt;     &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum44&quot;&gt;  44:&lt;/span&gt;     &lt;span style=&quot;color:#008000;&quot;&gt;//calculate the result of sum.&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum45&quot;&gt;  45:&lt;/span&gt;     printf(&lt;span style=&quot;color:#006080;&quot;&gt;&amp;quot;SUM(1/N!): %.15f\n&amp;quot;&lt;/span&gt;, factorial());&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum46&quot;&gt;  46:&lt;/span&gt;&amp;#160; &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum47&quot;&gt;  47:&lt;/span&gt;     &lt;span style=&quot;color:#008000;&quot;&gt;//print the executing period.&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum48&quot;&gt;  48:&lt;/span&gt;     printf(&lt;span style=&quot;color:#006080;&quot;&gt;&amp;quot;Total execute: %ldms\n&amp;quot;&lt;/span&gt;, clock() - start);&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum49&quot;&gt;  49:&lt;/span&gt; }&lt;/pre&gt;
</code></pre><p><!--CRLF--><br></p>
<p>And here is the result of execution:</p>
<blockquote>
<font face="Courier New">SUM(1/N!): 1.718281828459046<br><br>Total execute: 1ms</font>

</blockquote>
<p>If you use a hi-accuracy float type, then you might need to parallelize the code, but as for ‘double’ type here, such algorithm should be fast enough.</p>
<p>Thanks!</p>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2012/03/06/hello-world-console-app-parallelized-by-openmp/" >
  “Hello World” console app parallelized by OpenMP
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2012/03/06/hello-world-console-app-parallelized-by-openmp/"><span class="article-date">
  2012-03-06
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/">Algorithms</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/Programming/">Programming</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OpenMP/">OpenMP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Parallel-Programming/">Parallel Programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vWorker/">vWorker</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <p>OpenMP is a parallel programming standards which has been supported by lots of popular compilers. (In Visual C++, we will need to modify the project settings to enable OpenMP, see figure below.)</p>
<p>&#160;</p>
<p><a href="http://kevinxi.files.wordpress.com/2012/03/image2.png" target="_blank" rel="external"><img src="http://kevinxi.files.wordpress.com/2012/03/image_thumb2.png" alt="image" title="image"></a></p>
<p>&#160;</p>
<p>Now, let’s practice a simple algorithm problem: <em>for integers 1-10,000,000 finds out if the numbers are square or prime, and print out them into console. </em></p>
<blockquote>
<p>For Prime detection, I used to use <a href="http://kevinxi.wordpress.com/2010/12/25/a-monte-carlo-primer/" target="_blank" rel="external">Monte Carlo Prime</a> methodology, but it won’t always produce a correct answer. For example, they are 1299 Prime numbers between 1~10,000, Monte Carlo may give a wrong result (around 1320). As an old methodology, we test NUM by mod all odds between 3 and sqrt(NUM) here.  </p>
</blockquote>
<p><em><u>Sample Code</u></em><br>  <div style="border-bottom:silver 1px solid;text-align:left;border-left:silver 1px solid;line-height:12pt;background-color:#f4f4f4;width:97.5%;font-family:&#039;direction:ltr;max-height:800px;font-size:8pt;overflow:auto;border-top:silver 1px solid;cursor:text;border-right:silver 1px solid;margin:20px 0 10px;padding:4px;" id="codeSnippetWrapper">   <div style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;padding:0;" id="codeSnippet">     <pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span style="color:#606060;" id="lnum1">   1:</span> <span style="color:#008000;">//<em>QUESTION</em></span></pre><br><!--CRLF--></div></div></p>
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum2&quot;&gt;   2:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//For integers 1-10,000,000 finds out if the numbers are square or prime, &lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum3&quot;&gt;   3:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//displays the prime numbers and the square numbers.&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum4&quot;&gt;   4:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;// &lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum5&quot;&gt;   5:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//*NOTICE*&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum6&quot;&gt;   6:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//OpenMP 2.0 is used here, so you might need VS2010 or some other OMP2.0 &lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum7&quot;&gt;   7:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//compiler to get the code compiled.&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum8&quot;&gt;   8:&lt;/span&gt;&amp;#160; &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum9&quot;&gt;   9:&lt;/span&gt; &lt;span style=&quot;color:#cc6633;&quot;&gt;#include&lt;/span&gt; &amp;lt;stdio.h&amp;gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum10&quot;&gt;  10:&lt;/span&gt; &lt;span style=&quot;color:#cc6633;&quot;&gt;#include&lt;/span&gt; &amp;lt;omp.h&amp;gt; &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum11&quot;&gt;  11:&lt;/span&gt; &lt;span style=&quot;color:#cc6633;&quot;&gt;#include&lt;/span&gt; &amp;lt;ctime&amp;gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum12&quot;&gt;  12:&lt;/span&gt; &lt;span style=&quot;color:#cc6633;&quot;&gt;#include&lt;/span&gt; &amp;lt;cmath&amp;gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum13&quot;&gt;  13:&lt;/span&gt; &lt;span style=&quot;color:#cc6633;&quot;&gt;#include&lt;/span&gt; &amp;lt;cstdlib&amp;gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum14&quot;&gt;  14:&lt;/span&gt;&amp;#160; &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum15&quot;&gt;  15:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//*PRIME*&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum16&quot;&gt;  16:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//Theory 1: 1 is not a prime, 2/3/5 are primes.&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum17&quot;&gt;  17:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//Theory 2: test prime by divide n from 7 to sqrt(n).&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum18&quot;&gt;  18:&lt;/span&gt; &lt;span style=&quot;color:#0000ff;&quot;&gt;bool&lt;/span&gt; prime(&lt;span style=&quot;color:#0000ff;&quot;&gt;unsigned&lt;/span&gt; &lt;span style=&quot;color:#0000ff;&quot;&gt;int&lt;/span&gt; n)&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum19&quot;&gt;  19:&lt;/span&gt; {&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum20&quot;&gt;  20:&lt;/span&gt;     &lt;span style=&quot;color:#0000ff;&quot;&gt;unsigned&lt;/span&gt; &lt;span style=&quot;color:#0000ff;&quot;&gt;long&lt;/span&gt; c = 7;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum21&quot;&gt;  21:&lt;/span&gt;&amp;#160; &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum22&quot;&gt;  22:&lt;/span&gt;     &lt;span style=&quot;color:#0000ff;&quot;&gt;if&lt;/span&gt; (n == 2 || n == 3 || n == 5) &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum23&quot;&gt;  23:&lt;/span&gt;         &lt;span style=&quot;color:#0000ff;&quot;&gt;return&lt;/span&gt; true;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum24&quot;&gt;  24:&lt;/span&gt;     &lt;span style=&quot;color:#0000ff;&quot;&gt;if&lt;/span&gt; (n % 2 == 0 || n % 3 == 0 || n % 5 == 0 || n == 1)&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum25&quot;&gt;  25:&lt;/span&gt;         &lt;span style=&quot;color:#0000ff;&quot;&gt;return&lt;/span&gt; false;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum26&quot;&gt;  26:&lt;/span&gt;     &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum27&quot;&gt;  27:&lt;/span&gt;     &lt;span style=&quot;color:#0000ff;&quot;&gt;int&lt;/span&gt; maxc = &lt;span style=&quot;color:#0000ff;&quot;&gt;int&lt;/span&gt;(sqrt((&lt;span style=&quot;color:#0000ff;&quot;&gt;double&lt;/span&gt;)n));&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum28&quot;&gt;  28:&lt;/span&gt;     &lt;span style=&quot;color:#0000ff;&quot;&gt;while&lt;/span&gt; (c &amp;lt;= maxc)&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum29&quot;&gt;  29:&lt;/span&gt;     {&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum30&quot;&gt;  30:&lt;/span&gt;         &lt;span style=&quot;color:#0000ff;&quot;&gt;if&lt;/span&gt; (n % c == 0) &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum31&quot;&gt;  31:&lt;/span&gt;             &lt;span style=&quot;color:#0000ff;&quot;&gt;return&lt;/span&gt; false;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum32&quot;&gt;  32:&lt;/span&gt;         c += 2;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum33&quot;&gt;  33:&lt;/span&gt;     }&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum34&quot;&gt;  34:&lt;/span&gt;     &lt;span style=&quot;color:#0000ff;&quot;&gt;return&lt;/span&gt; true;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum35&quot;&gt;  35:&lt;/span&gt; }&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum36&quot;&gt;  36:&lt;/span&gt;&amp;#160; &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum37&quot;&gt;  37:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//*SQUARE*&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum38&quot;&gt;  38:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//Theory 1: the last digital of square number must be 0/1/4/5/6/9.&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum39&quot;&gt;  39:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//Theory 2: fsqrt(n) == (int)fsqrt(n).&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum40&quot;&gt;  40:&lt;/span&gt; &lt;span style=&quot;color:#0000ff;&quot;&gt;bool&lt;/span&gt; square(&lt;span style=&quot;color:#0000ff;&quot;&gt;unsigned&lt;/span&gt; &lt;span style=&quot;color:#0000ff;&quot;&gt;int&lt;/span&gt; n)&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum41&quot;&gt;  41:&lt;/span&gt; {&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum42&quot;&gt;  42:&lt;/span&gt;     &lt;span style=&quot;color:#0000ff;&quot;&gt;int&lt;/span&gt; last = n % 10;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum43&quot;&gt;  43:&lt;/span&gt;     &lt;span style=&quot;color:#0000ff;&quot;&gt;if&lt;/span&gt; (last == 0 || last == 1 || last == 4 ||&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum44&quot;&gt;  44:&lt;/span&gt;         last == 5 || last == 6 || last == 9)&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum45&quot;&gt;  45:&lt;/span&gt;     {&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum46&quot;&gt;  46:&lt;/span&gt;         &lt;span style=&quot;color:#0000ff;&quot;&gt;double&lt;/span&gt; val = sqrt((&lt;span style=&quot;color:#0000ff;&quot;&gt;double&lt;/span&gt;)n);&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum47&quot;&gt;  47:&lt;/span&gt;         &lt;span style=&quot;color:#0000ff;&quot;&gt;return&lt;/span&gt; (val == (&lt;span style=&quot;color:#0000ff;&quot;&gt;int&lt;/span&gt;)val);&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum48&quot;&gt;  48:&lt;/span&gt;     }&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum49&quot;&gt;  49:&lt;/span&gt;     &lt;span style=&quot;color:#0000ff;&quot;&gt;return&lt;/span&gt; false;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum50&quot;&gt;  50:&lt;/span&gt; }&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum51&quot;&gt;  51:&lt;/span&gt;&amp;#160; &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum52&quot;&gt;  52:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//*TEST MAIN*&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum53&quot;&gt;  53:&lt;/span&gt; &lt;span style=&quot;color:#008000;&quot;&gt;//Using OpenMP 2.0, parallelize the for loop.&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum54&quot;&gt;  54:&lt;/span&gt; &lt;span style=&quot;color:#cc6633;&quot;&gt;#define&lt;/span&gt; NUMBER_THREADS 4&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum55&quot;&gt;  55:&lt;/span&gt; &lt;span style=&quot;color:#0000ff;&quot;&gt;void&lt;/span&gt; main()&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum56&quot;&gt;  56:&lt;/span&gt; {    &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum57&quot;&gt;  57:&lt;/span&gt;     clock_t start = clock();&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum58&quot;&gt;  58:&lt;/span&gt;&amp;#160; &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum59&quot;&gt;  59:&lt;/span&gt;     &lt;span style=&quot;color:#008000;&quot;&gt;//setup the threads number.&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum60&quot;&gt;  60:&lt;/span&gt;     omp_set_num_threads(NUMBER_THREADS);&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum61&quot;&gt;  61:&lt;/span&gt;&amp;#160; &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum62&quot;&gt;  62:&lt;/span&gt;     &lt;span style=&quot;color:#008000;&quot;&gt;//parallelize the for loop, see&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum63&quot;&gt;  63:&lt;/span&gt;     &lt;span style=&quot;color:#008000;&quot;&gt;//http://supercomputingblog.com/openmp/tutorial-parallel-for-loops-with-openmp/&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum64&quot;&gt;  64:&lt;/span&gt;     &lt;span style=&quot;color:#cc6633;&quot;&gt;#pragma&lt;/span&gt; &lt;span style=&quot;color:#cc6633;&quot;&gt;omp&lt;/span&gt; parallel &lt;span style=&quot;color:#0000ff;&quot;&gt;for&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum65&quot;&gt;  65:&lt;/span&gt;     &lt;span style=&quot;color:#0000ff;&quot;&gt;for&lt;/span&gt; (&lt;span style=&quot;color:#0000ff;&quot;&gt;int&lt;/span&gt; i = 1; i &amp;lt; 10000; i++)&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum66&quot;&gt;  66:&lt;/span&gt;     {&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum67&quot;&gt;  67:&lt;/span&gt;         &lt;span style=&quot;color:#0000ff;&quot;&gt;if&lt;/span&gt; (square(i)) &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum68&quot;&gt;  68:&lt;/span&gt;         {&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum69&quot;&gt;  69:&lt;/span&gt;             printf(&lt;span style=&quot;color:#006080;&quot;&gt;&amp;quot;%d\t | SQUARE\n&amp;quot;&lt;/span&gt;, i);&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum70&quot;&gt;  70:&lt;/span&gt;         }&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum71&quot;&gt;  71:&lt;/span&gt;         &lt;span style=&quot;color:#0000ff;&quot;&gt;else&lt;/span&gt; &lt;span style=&quot;color:#0000ff;&quot;&gt;if&lt;/span&gt; (prime(i)) &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum72&quot;&gt;  72:&lt;/span&gt;         {&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum73&quot;&gt;  73:&lt;/span&gt;             printf(&lt;span style=&quot;color:#006080;&quot;&gt;&amp;quot;%d\t | PRIME\n&amp;quot;&lt;/span&gt;, i);&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum74&quot;&gt;  74:&lt;/span&gt;         }&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum75&quot;&gt;  75:&lt;/span&gt;     }&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum76&quot;&gt;  76:&lt;/span&gt;&amp;#160; &lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum77&quot;&gt;  77:&lt;/span&gt;     &lt;span style=&quot;color:#008000;&quot;&gt;// Usually, with /openmp option enabled in settings, it&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum78&quot;&gt;  78:&lt;/span&gt;     &lt;span style=&quot;color:#008000;&quot;&gt;// will take about 200ms to finish a 10,000 loop, and&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum79&quot;&gt;  79:&lt;/span&gt;     &lt;span style=&quot;color:#008000;&quot;&gt;// 2.2sec to finish a 10,000,000 loop.&lt;/span&gt;&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum80&quot;&gt;  80:&lt;/span&gt;     printf(&lt;span style=&quot;color:#006080;&quot;&gt;&amp;quot;Total execute: %ldms\n&amp;quot;&lt;/span&gt;, clock() - start);&lt;/pre&gt;
</code></pre><!--CRLF-->
<pre><code>&lt;pre style=&quot;text-align:left;line-height:12pt;background-color:white;width:100%;font-family:&amp;#039;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;&quot;&gt;&lt;span style=&quot;color:#606060;&quot; id=&quot;lnum81&quot;&gt;  81:&lt;/span&gt; }&lt;/pre&gt;
</code></pre><p><!--CRLF--><br></p>
<p>Okay, let’s get the code compiled to a .exe, and run it in command line:</p>
<blockquote>
<font face="Courier New">C:\Users\Kevin\Desktop\test.exe &gt; output.log</font>

</blockquote>
<p>Per my test, it will take <em><u>2200ms</u></em> to process 10,000,000 numbers, and <u><em>5000ms</em></u> to process 20,000,000 numbers. The calculation doesn’t have dependence between each other,it is time consuming but still a linear increasing.</p>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2010/12/27/reverse-polish-notation-infix-to-postfix-notation/" >
  Reverse Polish Notation – Infix to Postfix Notation
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2010/12/27/reverse-polish-notation-infix-to-postfix-notation/"><span class="article-date">
  2010-12-27
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/">Algorithms</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/Basic-Theory/">Basic Theory</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/Basic-Theory/Programming/">Programming</a></li></ul></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithms/">Algorithms</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Reverse-Polish-Notation/">Reverse Polish Notation</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Theory/">Theory</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <blockquote>
<p>本文仅介绍中缀表达式转换为后缀表达式的原理。 </p>
</blockquote>
<p>例子： A+B<em>(C-D)-E/F =&gt; ABCD-</em>+EF/-  </p><p>在中缀表达式转换为后缀表达式的过程中，操作数的顺序是一致的。转换的过程首先自左向右读取中缀表达式，遇到操作数就直接输出。遇到操作符时，把操作符压入符号栈，根据优先级比较后决定是否弹栈。  </p>
<ul>
<li>isp: in stack priority. 栈内优先级  </li><li>icp: in coming priority. 栈外优先级 <p>优先级表格： </p></li>
</ul>
<hr>
  <table border="0" cellspacing="0" cellpadding="1" width="401"> <tbody> <tr> <td valign="top" width="57">操作符</td> <td valign="top" width="57">#</td> <td valign="top" width="57">(</td> <td valign="top" width="57">^</td> <td valign="top" width="57">* / %</td> <td valign="top" width="57">+ -</td> <td valign="top" width="57">)</td></tr> <tr> <td valign="top" width="57">isp</td> <td valign="top" width="57">0</td> <td valign="top" width="57">1</td> <td valign="top" width="57">7</td> <td valign="top" width="57">5</td> <td valign="top" width="57">3</td> <td valign="top" width="57">8</td></tr> <tr> <td valign="top" width="57">icp</td> <td valign="top" width="57">0</td> <td valign="top" width="57">8</td> <td valign="top" width="57">6</td> <td valign="top" width="57">4</td> <td valign="top" width="57">2</td> <td valign="top" width="57">1</td></tr></tbody></table> 

<hr>
<p>转换过程模拟：</p>
<hr>
  <table border="0" cellspacing="0" cellpadding="2" width="500"> <tbody> <tr> <td valign="top" width="41">步序</td> <td valign="top" width="56">扫描项</td> <td valign="top" width="203">动作</td> <td valign="top" width="100">栈内容</td> <td valign="top" width="100">输出</td></tr> <tr> <td valign="top" width="41">00</td> <td valign="top" width="56">&nbsp;</td> <td valign="top" width="203">PUT ‘#’</td> <td valign="top" width="100">#</td> <td valign="top" width="100">&nbsp;</td></tr> <tr> <td valign="top" width="41">01</td> <td valign="top" width="56">A</td> <td valign="top" width="203">&nbsp;</td> <td valign="top" width="100">#</td> <td valign="top" width="100">A</td></tr> <tr> <td valign="top" width="41">02</td> <td valign="top" width="56">+</td> <td valign="top" width="203">isp(‘#’) &lt; icp(‘+’), PUT</td> <td valign="top" width="100">#+</td> <td valign="top" width="100">A</td></tr> <tr> <td valign="top" width="41">03</td> <td valign="top" width="56">B</td> <td valign="top" width="203">&nbsp;</td> <td valign="top" width="100">#+</td> <td valign="top" width="100">AB</td></tr> <tr> <td valign="top" width="41">04</td> <td valign="top" width="56"><em></em></td> <td valign="top" width="203">isp(‘+’) &lt; icp(‘’), PUT</td> <td valign="top" width="100">#+<em></em></td> <td valign="top" width="100">AB</td></tr> <tr> <td valign="top" width="41">05</td> <td valign="top" width="56">(</td> <td valign="top" width="203">isp(‘’) &lt; icp(‘(’), PUT</td> <td valign="top" width="100">#+<em>(</em></td> <td valign="top" width="100">AB</td></tr> <tr> <td valign="top" width="41">06</td> <td valign="top" width="56">C</td> <td valign="top" width="203">&nbsp;</td> <td valign="top" width="100">#+(</td> <td valign="top" width="100">ABC</td></tr> <tr> <td valign="top" width="41">07</td> <td valign="top" width="56">-</td> <td valign="top" width="203">isp(‘(’) &lt; icp(‘-’), PUT</td> <td valign="top" width="100">#+<em>(-</em></td> <td valign="top" width="100">ABC</td></tr> <tr> <td valign="top" width="41">08</td> <td valign="top" width="56">D</td> <td valign="top" width="203">&nbsp;</td> <td valign="top" width="100">#+(-</td> <td valign="top" width="100">ABCD</td></tr> <tr> <td valign="top" width="41">09</td> <td valign="top" width="56">)</td> <td valign="top" width="203">isp(‘-’) &gt; icp(‘)’), POP<br>isp(‘(’) = icp(‘)’), POP</td> <td valign="top" width="100">#+<em>(</em></td> <td valign="top" width="100">ABCD-</td></tr> <tr> <td valign="top" width="41">10</td> <td valign="top" width="56">-</td> <td valign="top" width="203">isp(‘’) &gt; icp(‘-’), POP<br>isp(‘+’) &gt; icp(‘-’), POP<br>isp(‘#’) &lt; icp(‘-’), PUT</td> <td valign="top" width="100">#+<br>#<br>#-</td> <td valign="top" width="100">ABCD-<em><br>ABCD-</em>+<br>ABCD-<em>+</em></td></tr> <tr> <td valign="top" width="41">11</td> <td valign="top" width="56">E</td> <td valign="top" width="203">&nbsp;</td> <td valign="top" width="100">#-</td> <td valign="top" width="100">ABCD-+E</td></tr> <tr> <td valign="top" width="41">12</td> <td valign="top" width="56">/</td> <td valign="top" width="203">isp(‘-’) &lt; icp(‘/’), PUT</td> <td valign="top" width="100">#-/</td> <td valign="top" width="100">ABCD-<em>+E</em></td></tr> <tr> <td valign="top" width="41">13</td> <td valign="top" width="56">F</td> <td valign="top" width="203">&nbsp;</td> <td valign="top" width="100">#-/</td> <td valign="top" width="100">ABCD-+EF</td></tr> <tr> <td valign="top" width="41">14</td> <td valign="top" width="56">#</td> <td valign="top" width="203">isp(‘/’) &gt; icp(‘#’), POP<br>isp(‘-’) &gt; icp(‘#’), POP</td> <td valign="top" width="100">#-<br>#</td> <td valign="top" width="100">ABCD-<em>+EF/<br>ABCD-</em>+EF/-</td></tr></tbody></table> 

<hr>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2010/12/25/reading-notes-of-introduction-to-algorithms/" >
  Reading Notes Of &lt;Introduction to Algorithms&gt;
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2010/12/25/reading-notes-of-introduction-to-algorithms/"><span class="article-date">
  2010-12-25
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/">Algorithms</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/Programming/">Programming</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/Programming/Reading/">Reading</a></li></ul></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithms/">Algorithms</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CLRS/">CLRS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Reading/">Reading</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <p><strong>Chapter 2</strong>(<a href="http://code.google.com/p/code-mirror/source/browse/trunk/common/clrs/chapter2.c" target="_blank" rel="external">source</a>): insertion sort, selection sort and merge sort.</p>
<p><strong>Chapter 6</strong>(<a href="http://code.google.com/p/code-mirror/source/browse/trunk/common/clrs/chapter6.c" target="_blank" rel="external">source</a>): heap sort.</p>
<p><strong>Chapter 7</strong>(<a href="http://code.google.com/p/code-mirror/source/browse/trunk/common/clrs/chapter7.c" target="_blank" rel="external">source</a>): quick sort.</p>
<p><strong>Chapter 9</strong>(<a href="http://code.google.com/p/code-mirror/source/browse/trunk/common/clrs/chapter9.c" target="_blank" rel="external">source</a>): randomized select.</p>
<p>&#160;</p>
<p>To be continued…</p>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2010/12/25/acm-icpc-ojs-categories-and-references/" >
  ACM-ICPC OJs Categories And References
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2010/12/25/acm-icpc-ojs-categories-and-references/"><span class="article-date">
  2010-12-25
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/">Algorithms</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/Basic-Theory/">Basic Theory</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/Basic-Theory/Programming/">Programming</a></li></ul></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ACM-ICPC/">ACM-ICPC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithms/">Algorithms</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Online-Judge/">Online Judge</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <p><strong>ACM/ICPC在线题库集锦</strong></p>
<ul>
<li>网址：<a href="http://acm.uva.es/简称" target="_blank" rel="external">http://acm.uva.es/简称</a>: uva全称: Valladolid Programming Contest Site所在国：西班牙提交方式：web方式和email方式说明：可能是世界上名气最大，最古老的在线题库了。收集了N卷的题目，许多国家队的高手都是从这里练出来的。题目包括历届ACM/ICPC分区赛试题、总决赛试题以及很多其他网友自己出的题目。题目类型比较全面，难度较平均，但是测试数据非常刁钻，而且经常更新旧的数据，在别的地方能通过的程序到了uva就可能无法通过。定期有比赛，并且可以利用它的系统主办自己的比赛。唯一的缺点是系统太烂，比赛的时候经常系统崩溃（不过这和参加的人太多也有关）。</li>
<li>网址：<a href="http://acm.zju.edu.cn/" target="_blank" rel="external">http://acm.zju.edu.cn/</a>简称: zju/zoj全称: ZJU Online Judge Contests所在国：中国提交方式：web方式说明：目前国内唯一一个在线题库。NJU的Settler队主要就在这里训练，因为不要出国，很方便。目前有6卷题目了，题目大多数是以前的ACM/ICPC分区赛试题和一些浙大ACM队员自己出的题目。定期有比赛。</li>
<li>网址：<a href="http://acm.timus.ru/" target="_blank" rel="external">http://acm.timus.ru/</a>简称: ural全称: Ural State University Problem Set Archive with Online Judge System&#160;所在国：俄罗斯提交方式：web方式和email方式说明：这也是一个著名的题库，因为是俄罗斯人办的，题目的数学味道比较浓。定期有比赛。这里的题目风格和ACM/ICPC不太相同，题目数学趣味浓，有一定难度，很多题目都是那种需要一些小技巧的，一旦想出来了程序可能只有几十行。中国的很多搞OI的中学生在这里做题，这里的题目比较适合中学的OIer。</li>
<li>网址：<a href="http://acm.sgu.ru/" target="_blank" rel="external">http://acm.sgu.ru/</a>简称: sgu全称: Saratov State University :: Online Contester所在国：俄罗斯提交方式：web方式说明：一个比较新的题库，同样因为是俄罗斯人办的，题目的数学味道很浓。定期有比赛。  </li>
</ul>
<p>以上这几个是比较适合参加ACM/ICPC的同学训练用的题库，还有一些诸如USACO等题库，基本上就是面向中学生的，这里就不提了。</p>
<p>&#160;</p>
<p><strong>基本算法与数据结构中文索引</strong></p>
<ul>
<li>Data Structures 基本数据结构</li>
<li>Dictionaries 字典</li>
<li>Priority Queues 堆</li>
<li>Graph Data Structures 图</li>
<li>Set Data Structures 集合</li>
<li>Kd-Trees 线段树</li>
<li>Numerical Problems 数值问题</li>
<li>Solving Linear Equations 线性方程组</li>
<li>Bandwidth Reduction 带宽压缩</li>
<li>Matrix Multiplication 矩阵乘法</li>
<li>Determinants and Permanents 行列式</li>
<li>Constrained and Unconstrained Optimization 最值问题</li>
<li>Linear Programming 线性规划</li>
<li>Random Number Generation 随机数生成</li>
<li>Factoring and Primality Testing 因子分解/质数判定</li>
<li>Arbitrary Precision Arithmetic 高精度计算</li>
<li>Knapsack Problem 背包问题</li>
<li>Discrete Fourier Transform 离散Fourier变换</li>
<li>Combinatorial Problems 组合问题</li>
<li>Sorting 排序</li>
<li>Searching 查找</li>
<li>Median and Selection 中位数</li>
<li>Generating Permutations 排列生成</li>
<li>Generating Subsets 子集生成</li>
<li>Generating Partitions 划分生成</li>
<li>Generating Graphs 图的生成</li>
<li>Calendrical Calculations 日期</li>
<li>Job Scheduling 工程安排</li>
<li>Satisfiability 可满足性</li>
<li>Graph Problems – polynomial 图论-多项式算法</li>
<li>Connected Components 连通分支</li>
<li>Topological Sorting 拓扑排序</li>
<li>Minimum Spanning Tree 最小生成树</li>
<li>Shortest Path 最短路径</li>
<li>Transitive Closure and Reduction 传递闭包</li>
<li>Matching 匹配</li>
<li>Eulerian Cycle / Chinese Postman Euler回路/中国邮路</li>
<li>Edge and Vertex Connectivity 割边/割点</li>
<li>Network Flow 网络流</li>
<li>Drawing Graphs Nicely 图的描绘</li>
<li>Drawing Trees 树的描绘</li>
<li>Planarity Detection and Embedding 平面性检测和嵌入</li>
<li>Graph Problems – hard 图论-NP问题</li>
<li>Clique 最大团</li>
<li>Independent Set 独立集</li>
<li>Vertex Cover 点覆盖</li>
<li>Traveling Salesman Problem 旅行商问题</li>
<li>Hamiltonian Cycle Hamilton回路</li>
<li>Graph Partition 图的划分</li>
<li>Vertex Coloring 点染色</li>
<li>Edge Coloring 边染色</li>
<li>Graph Isomorphism 同构</li>
<li>Steiner Tree Steiner树</li>
<li>Feedback Edge/Vertex Set 最大无环子图</li>
<li>Computational Geometry 计算几何</li>
<li>Convex Hull 凸包</li>
<li>Triangulation 三角剖分</li>
<li>Voronoi Diagrams Voronoi图</li>
<li>Nearest Neighbor Search 最近点对查询</li>
<li>Range Search 范围查询</li>
<li>Point Location 位置查询</li>
<li>Intersection Detection 碰撞测试</li>
<li>Bin Packing 装箱问题</li>
<li>Medial-Axis Transformation 中轴变换</li>
<li>Polygon Partitioning 多边形分割</li>
<li>Simplifying Polygons 多边形化简</li>
<li>Shape Similarity 相似多边形</li>
<li>Motion Planning 运动规划</li>
<li>Maintaining Line Arrangements 平面分割</li>
<li>Minkowski Sum Minkowski和</li>
<li>Set and String Problems 集合与串的问题</li>
<li>Set Cover 集合覆盖</li>
<li>Set Packing 集合配置</li>
<li>String Matching 模式匹配</li>
<li>Approximate String Matching 模糊匹配</li>
<li>Text Compression 压缩</li>
<li>Cryptography 密码</li>
<li>Finite State Machine Minimization 有穷自动机简化</li>
<li>Longest Common Substring 最长公共子串</li>
<li>Shortest Common Superstring 最短公共父串  </li>
</ul>
<p><strong>算法类书籍</strong></p>
<ul>
<li>N. Wirth, Algorithms + Data Structures = Programs, Prentice-Hall, Englewood Cliffs, 1975.</li>
<li>N. Wirth, Systematic Programming An Introduction, Prentice Hall, 1973.</li>
<li>A. Engel, Exploring mathematics with your computer, The Mathematical Association of America, 1993.</li>
<li>H. Papadimitriou, K. Steigltz, Combinatorial optimization – Algorithms and complexity, Dover, PUBNS, 1998.</li>
<li>A. Vitek, I. Tvrda i dr., Problems in programming / experience through practice, John Wiley &amp; Sons Ltd., 1991.</li>
<li>T. H. Cormen, C. E. Leiserson, R. L. Rivest, S. Stein, Introduction to Algorithms, The MIT Press, 2001.</li>
<li>D. E. Knuth, The Art of Computer Programming, 2nd Edition, Addison-Wesley, Volume 1: Fundamental Algorithms, 1997.; Volume 2: Seminumerical Algorithms, 1997.; Volume 3: Sorting and Searching, 1998.</li>
<li>Z. Michalewicz, D. B. Fogel, How to Solve It: Modern Heuristics, Springer-Verlag Berlin, 1999.</li>
<li>Steven S. Skiena, The Algorithm Design Manual, Springer-Verlag New York, Ins.,1998.</li>
<li>A. Shen, Algorithms and Programming - Problems and Solutions, Birkh Boston, 1997.  </li>
</ul>
<p><strong>赛题分析类书籍</strong></p>
<ul>
<li>ACM 试题分析（一）、（二）、（三） 吴文虎 清华</li>
<li>ACM 国际大学生程序设计比赛入门 郭嵩山（中山） 机械出版</li>
<li>组合数学/图论/奥林匹克信息学国内外赛题分析 吴文虎 王建德</li>
<li>ACM/ICPC 试题分析 王建德  </li>
</ul>
<p><strong>理论类书籍</strong></p>
<ul>
<li>M. Sipser, Introduction to Theory of Computation.</li>
<li>H. Lewis &amp; C. Papadimitriou, Elements of the theory of computation.</li>
<li>J. Hopcroft, R. Motwani &amp; J. Ullman. Introduction to Automata Theory, Languages, and Computation.</li>
</ul>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2010/12/25/a-monte-carlo-primer/" >
  A Monte Carlo Primer
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2010/12/25/a-monte-carlo-primer/"><span class="article-date">
  2010-12-25
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/">Algorithms</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/Programming/">Programming</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithms/">Algorithms</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Monte-Carlo/">Monte Carlo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Primer/">Primer</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <ul>
<li>蒙特卡罗算法判断素数，前提：n&gt;3</li>
<li>费尔马小定理：如果p是素数，且0&lt;a&lt;p,则a的p-1次方模p恒等于1</li>
<li>二次探测定理：如果p是个素，,且0&lt;x&lt;p,则方程（x平房模p=1）的解为 x=1或p-1<br><div id="codeSnippetWrapper" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:97.5%;font-family:'Courier New', courier, monospace;direction:ltr;max-height:400px;font-size:8pt;overflow:auto;cursor:text;border:silver 1px solid;margin:20px 0 10px;padding:4px;"><br><div id="codeSnippet" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;padding:0;"><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;"><span style="color:#cc6633;">#include</span> &lt;iostream&gt;</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;"><span style="color:#cc6633;">#include</span> &lt;ctime&gt;</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;"><span style="color:#cc6633;">#include</span> &lt;cstdlib&gt;</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;"><span style="color:#0000ff;">using</span> <span style="color:#0000ff;">namespace</span> std;</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;"><span style="color:#0000ff;">void</span> power(<span style="color:#0000ff;">unsigned</span> <span style="color:#0000ff;">int</span> a,<span style="color:#0000ff;">unsigned</span> <span style="color:#0000ff;">int</span> p,<span style="color:#0000ff;">unsigned</span> <span style="color:#0000ff;">int</span> n,<span style="color:#0000ff;">unsigned</span> <span style="color:#0000ff;">int</span> &amp;result,<span style="color:#0000ff;">bool</span> &amp;composite)</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">{</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    <span style="color:#008000;">//对n的二次探测</span></pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    <span style="color:#0000ff;">unsigned</span> <span style="color:#0000ff;">int</span> x;</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    <span style="color:#0000ff;">if</span>(p==0)</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    result=1;</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    <span style="color:#0000ff;">else</span></pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    {</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">        power(a,p/2,n,x,composite);</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">        result=(x*x)%n;</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">        <span style="color:#0000ff;">if</span>((result==1)&amp;&amp;(x!=1)&amp;&amp;(x!=n-1))</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">        composite=true;</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">        <span style="color:#0000ff;">if</span>((p%2)==1)</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">        result=(result*a)%n;</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    }</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">}<span style="color:#008000;">//求a的p次方模n </span></pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;"><span style="color:#008000;">//判定素数的motecarlo算法</span></pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;"><span style="color:#0000ff;">bool</span> Prime(<span style="color:#0000ff;">unsigned</span> <span style="color:#0000ff;">int</span> n)</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">{</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    <span style="color:#0000ff;">unsigned</span> <span style="color:#0000ff;">int</span> a,result;srand(time(0));</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    <span style="color:#0000ff;">bool</span> composite=false;</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    a=rand()%(n-3)+2;</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    power(a,n-1,n,result,composite);</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    <span style="color:#0000ff;">if</span>(composite||(result!=1))<span style="color:#0000ff;">return</span> false;</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">return</span> true;</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">}</pre><!--CRLF-->
</div></div></li>
</ul>
<p><br></p>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2010/12/25/107-problem-stirlings-formula/" >
  10^7! Problem – Stirling&#39;s Formula
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2010/12/25/107-problem-stirlings-formula/"><span class="article-date">
  2010-12-25
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/">Algorithms</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/Programming/">Programming</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithms/">Algorithms</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Stirling-s-Formula/">Stirling's Formula</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <blockquote>
<p>斯特林公式：lnξ = ξ<em>lnξ－ξ+0.5</em>ln(2ξ*PI)<br>ξ的阶乘的位数等于：log10(ξ!)取整后加1，log10(ξ!) = lnξ! / ln(10)。</p>
<p><div id="codeSnippetWrapper" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:97.5%;font-family:'Courier New', courier, monospace;direction:ltr;max-height:400px;font-size:8pt;overflow:auto;cursor:text;border:silver 1px solid;margin:20px 0 10px;padding:4px;"></div></p>
<p><div id="codeSnippet" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;padding:0;"></div></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">#include&lt;stdio.h&gt;</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">#include&lt;math.h&gt;</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;"><span style="color:#cc6633;">#define</span> PI 3.14159265</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;"><span style="color:#cc6633;">#define</span> N 10000000</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;"><span style="color:#0000ff;">int</span> main(){</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    <span style="color:#0000ff;">int</span> len;</pre><br><!--CRLF--></p>
</blockquote>
<!--CRLF-->
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    len=ceil((N<em>log(N)-N+log(2</em>N*PI)/2)/log(10));</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    <span style="color:#008000;">//ceil求上界，即不小于某值的最小整数</span></pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    <span style="color:#008000;">//log在c语言里面是自然对数</span></pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    printf(<span style="color:#006080;">“%d\n”</span>,len);</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    <span style="color:#0000ff;">return</span> 0;</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">}</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">//len=65657060</pre><br><!--CRLF--></p>
<p><br></p>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2010/12/25/josephus-problem/" >
  Josephus Problem
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2010/12/25/josephus-problem/"><span class="article-date">
  2010-12-25
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/">Algorithms</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/Programming/">Programming</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithms/">Algorithms</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Josephus/">Josephus</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <p>问题描述：n个人（编号0~(n-1))，从0开始报数，报到(m-1)的退出，剩下的人继续从0开始报数。求胜利者的编号。</p>
<p>我们知道第一个人(编号一定是m%n-1) 出列之后，剩下的n-1个人组成了一个新的约瑟夫环（以编号为k=m%n的人开始）：k  k+1 … n-2, n-1, 0, 1, 2, … k-2，并且从k开始报0。</p>
<p>现在我们把他们的编号做一下转换：<br>k        –&gt; 0<br>k+1   –&gt; 1<br>k+2   –&gt; 2<br>…<br>k-2   –&gt; n-2<br>k-1   –&gt; n-1</p>
<p>变换后就完完全全成为了(n-1)个人报数的子问题，假如我们知道这个子问题的解：例如x是最终的胜利者，那么根据上面这个表把这个x变回去：x=(x+k)%n。</p>
<p>递推公式：令f[i]表示i个人玩游戏报m退出最后胜利者的编号，最后的结果自然是f[n]：</p>
<p>f[1]=0;<br>f[i]=(f[i-1]+m)%i;  (i&gt;1)</p>
<div id="codeSnippetWrapper" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:97.5%;font-family:'Courier New', courier, monospace;direction:ltr;max-height:400px;font-size:8pt;overflow:auto;cursor:text;border:silver 1px solid;margin:20px 0 10px;padding:4px;"><br><div id="codeSnippet" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;padding:0;"><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;"><span style="color:#cc6633;">#include</span> &lt;stdio.h&gt;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;"></pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;"><span style="color:#0000ff;">int</span> main()</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">{</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">  <span style="color:#0000ff;">int</span> n, m, i, s=0;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">  scanf(<span style="color:#006080;">“%d%d”</span>, &amp;n, &amp;m);</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">  <span style="color:#0000ff;">for</span> (i=2; i&lt;=n; i++) s=(s+m)%i;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">  printf (<span style="color:#006080;">“The winner is %d\n”</span>, s+1);</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">  <span style="color:#0000ff;">return</span> 0;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">}</pre><br><!--CRLF--><br><br></div><br></div>
        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2010/12/25/kmpd-e-knuth-j-h-morris-v-r-pratt-string-matching/" >
  KMP(D.E.Knuth J.H.Morris V.R.Pratt) String Matching
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2010/12/25/kmpd-e-knuth-j-h-morris-v-r-pratt-string-matching/"><span class="article-date">
  2010-12-25
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/">Algorithms</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/Programming/">Programming</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithms/">Algorithms</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/KMP/">KMP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/String-Matching/">String Matching</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <blockquote>
<p>Main函数首先通过失效函数生成fail[]，然后通过fastFind函数返回第一个匹配成功字符串的起始位置。</p>
<p>算法的关键是fail[]的生成，比较难以理解的也是相应失效函数递推计算的部分。</p>
<p><div id="codeSnippetWrapper" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:97.5%;font-family:'Courier New', courier, monospace;direction:ltr;max-height:400px;font-size:8pt;overflow:auto;cursor:text;border:silver 1px solid;margin:20px 0 10px;padding:4px;"></div></p>
<p><div id="codeSnippet" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;padding:0;"></div></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;"><span style="color:#cc6633;">#include</span> &lt;iostream&gt;</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;"><span style="color:#cc6633;">#include</span> &lt;string&gt;</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;"><span style="color:#0000ff;">using</span> <span style="color:#0000ff;">namespace</span> std;</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;"><span style="color:#0000ff;">int</span> *fail;<span style="color:#008000;">//匹配字符串的失效函数</span></pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;"><span style="color:#0000ff;">int</span> fastFind(string &amp;cur,string &amp;pat,<span style="color:#0000ff;">int</span> *fail){</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    <span style="color:#0000ff;">int</span> posP=0,posT=0;</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    <span style="color:#0000ff;">int</span> lengthP=pat.length(),lengthT=cur.length();</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    <span style="color:#0000ff;">while</span>(posP&lt;lengthP &amp;&amp; posT&lt;lengthT){</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">        <span style="color:#0000ff;">if</span>(pat.at(posP)==cur.at(posT)){</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">            posP++;posT++;<span style="color:#008000;">//匹配成功一位就同时向后移一位</span></pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">        }</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">        <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span>(posP==0) posT++;<span style="color:#008000;">//当匹配串没有找到第一个字符时，被匹配字符串向后移</span></pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">        <span style="color:#0000ff;">else</span> posP=fail[posP-1]+1;<span style="color:#008000;">//否则，通过失效函数找到重新匹配的起始位置</span></pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    }</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    <span style="color:#0000ff;">if</span>(posP&lt;lengthP) <span style="color:#0000ff;">return</span> -1;</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">return</span> posT - lengthP;<span style="color:#008000;">//匹配成功时返回被匹配串中的匹配上的起始位置   </span></pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">}</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;"><span style="color:#008000;">/*</span></pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;"><span style="color:#008000;">失效函数的作用就是计算处fail[]数组，fail[i]的定义为</span></pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;"><span style="color:#008000;">fail[i] = k (0&lt;=k&lt;i 且 P0P1……Pk = Pi-kPi-k+1……Pi 的最大整数)</span></pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;"><span style="color:#008000;">        = -1  (其他)</span></pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;"><span style="color:#008000;">*/</span></pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;"><span style="color:#0000ff;">void</span> createFail(string &amp;pat){</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    <span style="color:#0000ff;">int</span> lengthP = pat.length();</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    fail = <span style="color:#0000ff;">new</span> <span style="color:#0000ff;">int</span>[lengthP];</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    fail[0] = -1;</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    <span style="color:#0000ff;">for</span>(<span style="color:#0000ff;">int</span> j=1;j&lt;lengthP;j++){</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">        <span style="color:#0000ff;">int</span> i=fail[j-1];</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">        <span style="color:#0000ff;">while</span>(pat.at(j)!=pat.at(i+1)&amp;&amp;i&gt;=0) i=fail[i];<span style="color:#008000;">//这一步递推计算失效函数</span></pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">        <span style="color:#0000ff;">if</span>(pat.at(j)==pat.at(i+1)) fail[j]=i+1;</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">        <span style="color:#0000ff;">else</span> fail[j]=-1;</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    }</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">}</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;"></pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;"><span style="color:#0000ff;">int</span> main(){</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    string cur,pat;</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    getline(cin,cur);getchar();</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    getline(cin,pat);</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    createFail(pat);</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    cout&lt;&lt;fastFind(cur,pat,fail);</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    <span style="color:#0000ff;">return</span> 0;</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">}</pre><br><!--CRLF--></p>
</blockquote>
<p><br></p>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2010/12/25/sparse-matrix-with-triple-table/" >
  Sparse Matrix With Triple Table
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2010/12/25/sparse-matrix-with-triple-table/"><span class="article-date">
  2010-12-25
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/">Algorithms</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Algorithms/Programming/">Programming</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Data-Structure/">Data Structure</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Sparse-Matrix/">Sparse Matrix</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Triple-Table/">Triple Table</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <p>1. 稀疏矩阵的三元组表示：row|column|value<br>2. 三元组的稀疏矩阵的转置：将row和column对换并排序</p>
<ul>
<li>Terms：矩阵中非零元素的个数</li>
<li>Rows：原矩阵的行数</li>
<li>Cols：原矩阵的列数</li>
<li>rowSize：存放原稀疏矩阵各列的非零元素个数</li>
<li>rowStart：存放转置矩阵各行非零元素的起始保存位置<br><div id="codeSnippetWrapper" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:97.5%;font-family:'Courier New', courier, monospace;direction:ltr;max-height:200px;font-size:8pt;overflow:auto;cursor:text;border:silver 1px solid;margin:20px 0 10px;padding:4px;"><br><div id="codeSnippet" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;padding:0;"><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;"><span style="color:#0000ff;">template</span>&lt;<span style="color:#0000ff;">class</span> Type&gt; SparseMatrix&lt;Type&gt; SparseMatrix&lt;Type&gt;::FastTranpos(){</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">        <span style="color:#0000ff;">int</span> *rowSize = <span style="color:#0000ff;">new</span> <span style="color:#0000ff;">int</span>[Cols];</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">        <span style="color:#0000ff;">int</span> *rowStart = <span style="color:#0000ff;">new</span> <span style="color:#0000ff;">int</span>[Cols];</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">        SparseMatrix&lt;Type&gt; b(Cols,Rows);</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">        b.Rows = Cols;b.Cols = Rows;b.Terms = Terms;</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">        <span style="color:#0000ff;">if</span>(Terms &gt; 0){</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">            <span style="color:#0000ff;">for</span>(<span style="color:#0000ff;">int</span> i=0;i&lt;Cols;i++) rowSize[i]=0;</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">            <span style="color:#0000ff;">for</span>(i=0;i&lt;Terms;i++) rowSize[smArray[i].col]++;</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">            rowStart[0]=0;</pre><!--CRLF-->
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">            <span style="color:#0000ff;">for</span>(i=1;i&lt;Cols;i++) rowStart[i]=rowStart[i-1]+rowSize[i-1];</pre><!--CRLF-->
</div></div></li>
</ul>
<!--CRLF-->
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">            <span style="color:#0000ff;">for</span>(i=0;i&lt;Terms;i++){</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">                <span style="color:#0000ff;">int</span> j = rowStart[smArray[i].col];</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">                b.smArray[j].row = smArray[i].col;</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">                b.smArray[j].col = smArray[i].row;</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">                b.smArray[j].value = smArray[i].value;</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">                rowStart[smArray[i].col]++;    <span style="color:#008000;">//这一步将每行的rowStart定位向后移    </span></pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">            }</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">        }</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">            <span style="color:#0000ff;">delete</span>[] rowSize; <span style="color:#0000ff;">delete</span>[] rowStart;</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">        <span style="color:#0000ff;">return</span> b;</pre><br><!--CRLF--></p>
<p><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    }</pre><br><!--CRLF--></p>
<p><br><br>3. 三元组的稀疏矩阵相乘</p>
<div id="codeSnippetWrapper" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:97.5%;font-family:'Courier New', courier, monospace;direction:ltr;max-height:200px;font-size:8pt;overflow:auto;cursor:text;border:silver 1px solid;margin:20px 0 10px;padding:4px;"><br><div id="codeSnippet" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;padding:0;"><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;"><span style="color:#0000ff;">template</span>&lt;<span style="color:#0000ff;">class</span> Type&gt; SparseMatrix&lt;Type&gt; SparseMatrix&lt;Type&gt;::Multiply(SparseMatrix&lt;Type&gt; b){</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    <span style="color:#0000ff;">if</span>(Cols!=b.Rows){</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">        cout &lt;&lt; <span style="color:#006080;">“Incompatible matrices”</span> &lt;&lt; endl;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">        <span style="color:#0000ff;">return</span> EmptyMatrix();</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    }</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    <span style="color:#0000ff;">if</span>(Terms==MaxTerms || b.Terms==MaxTerms){</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">        cout &lt;&lt; <span style="color:#006080;">“One additional space in a or b needed”</span> &lt;&lt; endl;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">        <span style="color:#0000ff;">return</span> EmptyMatrix();</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    }</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    <span style="color:#0000ff;">int</span> <em>rowSize = <span style="color:#0000ff;">new</span> <span style="color:#0000ff;">int</span>[b.Rows];</em></pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    <span style="color:#0000ff;">int</span> rowStart = <span style="color:#0000ff;">new</span> <span style="color:#0000ff;">int</span>[b.Rows+1];</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    Type <em>temp = <span style="color:#0000ff;">new</span> Type[b.Cols];</em></pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    SparseMatrix&lt;Type&gt; result(Rows,Cols);    <span style="color:#008000;">//构造运算的结果矩阵        </span></pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    <span style="color:#0000ff;">for</span>(<span style="color:#0000ff;">int</span> i=0;i&lt;b.Rows;i++) rowSize[i]=0;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    <span style="color:#0000ff;">for</span>(i=0;i&lt;b.Terms;i++) rowSize[smArray[i].row]++;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    rowStart[0]=0;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    <span style="color:#0000ff;">for</span>(i=1;i&lt;b.Rows;i++) rowStart[i]=rowStart[i-1]+rowSize[i-1];</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    <span style="color:#0000ff;">int</span> Current=0; lastInResult=-1;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    <span style="color:#0000ff;">while</span>(Current&lt;Terms){</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">        <span style="color:#0000ff;">int</span> RowA = smArray[Current].row;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">        <span style="color:#0000ff;">for</span>(i=0;i&lt;b.Cols;i++) temp[i]=0;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">        <span style="color:#0000ff;">while</span>(Current&lt;Terms&amp;&amp;smArray[Current].row==RowA){<span style="color:#008000;">//生产temp数组</span></pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">            <span style="color:#0000ff;">int</span> ColA = smArray[Current].col;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">            <span style="color:#0000ff;">for</span>(i=rowStart[ColA];i&lt;rowStart[ColA+1];i++){</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">                <span style="color:#0000ff;">int</span> ColB = b.smArray[i].col;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">                temp[ColB] = temp[ColB]+smArray[Current].value  b.smArray[i].value;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">            }</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">            Current++;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">        }</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">        <span style="color:#0000ff;">for</span>(i=0;i&lt;b.Cols;i++)<span style="color:#008000;">//将每一行的计算结果保存到result数组</span></pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">            <span style="color:#0000ff;">if</span>(temp[i]!=0){</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">                lastInResult++;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">                    result.smArray[LastInResult].row = RowA;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">                    result.smArray[LastInResult].col = i;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">                    result.smArray[LastInResult].value = temp[i];</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">            }</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    }</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    result.Rows = Rows; result.Cols = b.Cols; result.Terms = lastInResult + 1;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">    <span style="color:#0000ff;">delete</span>[] rowSize; <span style="color:#0000ff;">delete</span>[] rowStart; <span style="color:#0000ff;">delete</span>[] temp;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;">    <span style="color:#0000ff;">return</span> result;</pre><br><!--CRLF--><br><pre style="text-align:left;line-height:12pt;background-color:white;width:100%;">}</pre><br><!--CRLF--><br><br></div><br></div>
        
      </div>
    </div>

  
    </div>
  



  <div class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/categories/Algorithms/page/2/">2</a><a class="extend next" rel="next" href="/categories/Algorithms/page/2/">Next</a>
  </div>




          <div class="main-footer">
  
    © 2016 Kevin&#39;s Blog - Powered by <a href="http://hexo.io" target="_blank">Hexo</a> - Theme <a href="https://github.com/denjones/hexo-theme-chan" target="_blank">Chan</a>
  
</div>

      
        </div>
      
    </div>
  </div>
  <script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

  <link rel="stylesheet" href="/PhotoSwipe/photoswipe.css">
  <link rel="stylesheet" href="/PhotoSwipe/default-skin/default-skin.css">

  <!-- Root element of PhotoSwipe. Must have class pswp. -->
  <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
             It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

      <!-- Container that holds slides.
                PhotoSwipe keeps only 3 of them in the DOM to save memory.
                Don't modify these 3 pswp__item elements, data is added later on. -->
      <div class="pswp__container">
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
      </div>

      <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
      <div class="pswp__ui pswp__ui--hidden">

        <div class="pswp__top-bar">

          <!--  Controls are self-explanatory. Order can be changed. -->

          <div class="pswp__counter"></div>

          <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

          <button class="pswp__button pswp__button--share" title="Share"></button>

          <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

          <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

          <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
          <!-- element will get class pswp__preloader--active when preloader is running -->
          <div class="pswp__preloader">
            <div class="pswp__preloader__icn">
              <div class="pswp__preloader__cut">
                <div class="pswp__preloader__donut"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
          <div class="pswp__share-tooltip"></div>
        </div>

        <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>

        <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>

        <div class="pswp__caption">
          <div class="pswp__caption__center"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="/PhotoSwipe/photoswipe.js"></script>
  <script src="/PhotoSwipe/photoswipe-ui-default.js"></script>


<script src="/perfect-scrollbar/js/min/perfect-scrollbar.min.js"></script>
<script src="/scripts/main.js"></script>

</body>
</html>
